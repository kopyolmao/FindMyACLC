<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ACLC Lost and Found</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Firebase SDK -->
 <script type="module">
  // Import the functions you need from the SDKs you need
  import {
    initializeApp
  } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import {
    getAnalytics
  } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut,
    sendEmailVerification,
    sendPasswordResetEmail
  } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";
  import {
    getFirestore,
    doc,
    setDoc,
    getDoc,
    collection,
    addDoc,
    getDocs,
    query,
    where
  } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBASqZ7VDxU_j6VEDN9pmhIDuDM1SU9qoI",
    authDomain: "findmyaclc.firebaseapp.com",
    projectId: "findmyaclc",
    storageBucket: "findmyaclc.firebasestorage.app",
    messagingSenderId: "351280538849",
    appId: "1:351280538849:web:7b930e2e2885b40f4083a0",
    measurementId: "G-ZH9V9KH3H2"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Make Firebase available globally
 
  window.auth = auth;
  window.db = db;
  window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
  window.signInWithEmailAndPassword = signInWithEmailAndPassword;
  window.signOut = signOut;
  window.sendEmailVerification = sendEmailVerification;
  window.sendPasswordResetEmail = sendPasswordResetEmail;
  window.setDoc = setDoc;
  window.getDoc = getDoc;
  window.doc = doc;
  window.getDocs = getDocs;
  window.collection = collection;
  window.query = query;
  window.where = where;

  // SINGLE Auth state listener (updated for role-based dashboards)
  onAuthStateChanged(auth, async (user) => {
    const authButtons = document.querySelector('.auth-buttons');
    const homepage = document.getElementById('homepage');
    const studentDashboard = document.getElementById('studentDashboard');
    const staffDashboard = document.getElementById('staffDashboard');
    
    if (user && user.emailVerified) {
      // User is signed in and verified
      homepage.style.display = 'none';
      
      // Get user data to determine role
      let userData = null;
      try {
        const userDoc = await getDoc(doc(db, "users", user.uid));
        if (userDoc.exists()) {
          userData = userDoc.data();
          
          // SYNC EMAIL VERIFICATION STATUS
          const currentEmailVerified = userDoc.data().emailVerified;
          if (currentEmailVerified !== user.emailVerified) {
            await setDoc(doc(db, "users", user.uid), {
              emailVerified: user.emailVerified
            }, { merge: true });
          }
        }
      } catch (error) {
        console.warn("Could not access user data:", error.message);
      }
      
      const username = userData?.username || user.email.split('@')[0];
      const userType = userData?.userType || 'student';
      
      // Update header welcome
      authButtons.innerHTML = `
        <span class="user-welcome">Welcome, ${username} (${userType})</span>
        <button class="sign-out-btn">Sign Out</button>
      `;
      
      // Show appropriate dashboard based on user type
      if (userType === 'staff') {
        studentDashboard.style.display = 'none';
        staffDashboard.style.display = 'block';
        document.getElementById('staffDashboardWelcome').textContent = `Welcome, ${username}!`;
        loadStaffDashboard();
      } else {
        staffDashboard.style.display = 'none';
        studentDashboard.style.display = 'block';
        document.getElementById('studentDashboardWelcome').textContent = `Welcome, ${username}!`;
        loadStudentDashboard();
      }
      
    } else if (user && !user.emailVerified) {
      // User is signed in but not verified
      homepage.style.display = 'block';
      studentDashboard.style.display = 'none';
      staffDashboard.style.display = 'none';
      authButtons.innerHTML = `
        <span class="user-welcome">Welcome (Unverified)</span>
        <button class="sign-out-btn">Sign Out</button>
      `;
      
      showVerificationReminder(user);
    } else {
      // User is signed out
      homepage.style.display = 'block';
      studentDashboard.style.display = 'none';
      staffDashboard.style.display = 'none';
      authButtons.innerHTML = `
        <button class="sign-in-btn">Sign In</button>
        <button class="sign-up-btn">Sign Up</button>
      `;
    }
    
    // Add event listeners
    document.querySelector('.sign-in-btn')?.addEventListener('click', showSignInModal);
    document.querySelector('.sign-up-btn')?.addEventListener('click', showSignUpModal);
    document.querySelector('.sign-out-btn')?.addEventListener('click', handleSignOut);
  });

  // Student Dashboard Functions
  async function loadStudentDashboard() {
    try {
      const user = auth.currentUser;
      if (!user) return;
      
      // Load recent lost items (last 30 days)
      const thirtyDaysAgo = new Date();
      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
      
      const lostItemsQuery = query(
        collection(db, "items"), 
        where("type", "==", "lost"),
        where("date", ">=", thirtyDaysAgo)
      );
      const lostItemsSnapshot = await getDocs(lostItemsQuery);
      const lostItems = lostItemsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      
      // Load recent found items (last 30 days)
      const foundItemsQuery = query(
        collection(db, "items"), 
        where("type", "==", "found"),
        where("date", ">=", thirtyDaysAgo)
      );
      const foundItemsSnapshot = await getDocs(foundItemsQuery);
      const foundItems = foundItemsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      
      // Load student's personal stats
      const userClaimsQuery = query(
        collection(db, "claims"),
        where("claimedBy", "==", user.uid)
      );
      const userClaimsSnapshot = await getDocs(userClaimsQuery);
      const userClaims = userClaimsSnapshot.docs.map(doc => doc.data());
      
      const pendingClaims = userClaims.filter(claim => claim.status === 'pending');
      const userLostItemsQuery = query(
        collection(db, "items"),
        where("reportedBy", "==", user.uid),
        where("type", "==", "lost")
      );
      const userLostItemsSnapshot = await getDocs(userLostItemsQuery);
      
      // Update UI
      updateItemsList('studentLostItemsList', lostItems.slice(0, 10)); // Show only 10 most recent
      updateItemsList('studentFoundItemsList', foundItems.slice(0, 10));
      
      // Update student stats
      document.getElementById('studentLostCount').textContent = userLostItemsSnapshot.size;
      document.getElementById('studentClaimedCount').textContent = userClaims.length;
      document.getElementById('studentPendingCount').textContent = pendingClaims.length;
      
    } catch (error) {
      console.error("Error loading student dashboard:", error);
    }
  }

  // Staff Dashboard Functions
  async function loadStaffDashboard() {
    try {
      // Load all items for staff
      const lostItemsQuery = query(collection(db, "items"), where("type", "==", "lost"));
      const lostItemsSnapshot = await getDocs(lostItemsQuery);
      const lostItems = lostItemsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      
      const foundItemsQuery = query(collection(db, "items"), where("type", "==", "found"));
      const foundItemsSnapshot = await getDocs(foundItemsQuery);
      const foundItems = foundItemsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      
      // Load pending claims
      const pendingClaimsQuery = query(
        collection(db, "claims"),
        where("status", "==", "pending")
      );
      const pendingClaimsSnapshot = await getDocs(pendingClaimsQuery);
      const pendingClaims = pendingClaimsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      
      // Load stats
      const weekAgo = new Date();
      weekAgo.setDate(weekAgo.getDate() - 7);
      const resolvedClaimsQuery = query(
        collection(db, "claims"),
        where("status", "in", ["approved", "rejected"]),
        where("resolvedAt", ">=", weekAgo)
      );
      const resolvedClaimsSnapshot = await getDocs(resolvedClaimsQuery);
      
      // Update UI
      updateItemsList('staffLostItemsList', lostItems);
      updateItemsList('staffFoundItemsList', foundItems.filter(item => item.status !== 'claimed'));
      updatePendingClaimsList(pendingClaims);
      
      // Update staff stats
      document.getElementById('totalItemsCount').textContent = lostItemsSnapshot.size + foundItemsSnapshot.size;
      document.getElementById('pendingClaimsCount').textContent = pendingClaimsSnapshot.size;
      document.getElementById('resolvedClaimsCount').textContent = resolvedClaimsSnapshot.size;
      
    } catch (error) {
      console.error("Error loading staff dashboard:", error);
    }
  }

  function updatePendingClaimsList(claims) {
    const listElement = document.getElementById('pendingClaimsList');
    if (claims.length === 0) {
      listElement.innerHTML = '<div class="no-items">No pending claims at the moment</div>';
      return;
    }
    
    listElement.innerHTML = claims.map(claim => `
      <div class="item-card">
        <div class="item-header">
          <h4>Claim for: ${claim.itemName}</h4>
          <span class="claim-status pending">Pending Review</span>
        </div>
        <p class="item-description">Claimed by: ${claim.claimedByName || 'User'}</p>
        <div class="item-details">
          <span class="item-date">üìÖ Claimed on: ${new Date(claim.claimedAt?.toDate()).toLocaleDateString()}</span>
        </div>
        <div class="staff-action-buttons">
          <button class="staff-action-btn approve-btn" onclick="processClaim('${claim.id}', 'approved')">Approve</button>
          <button class="staff-action-btn reject-btn" onclick="processClaim('${claim.id}', 'rejected')">Reject</button>
          <button class="staff-action-btn view-btn" onclick="viewClaimDetails('${claim.id}')">Details</button>
        </div>
      </div>
    `).join('');
  }

  // Add these new global functions
  window.processClaim = async (claimId, status) => {
    try {
      await setDoc(doc(db, "claims", claimId), {
        status: status,
        resolvedAt: new Date(),
        resolvedBy: auth.currentUser.uid
      }, { merge: true });
      
      alert(`Claim ${status} successfully!`);
      loadStaffDashboard(); // Refresh the dashboard
    } catch (error) {
      console.error("Error processing claim:", error);
      alert("Error processing claim. Please try again.");
    }
  };

  window.viewClaimDetails = (claimId) => {
    alert(`Viewing claim details for ${claimId} - This feature will be implemented soon!`);
  };

  window.showMyClaims = () => {
    alert("Showing your claims - This feature will be implemented soon!");
  };

  window.showAllClaims = () => {
    alert("Showing all claims - This feature will be implemented soon!");
  };

  window.showAnalytics = () => {
    alert("Showing analytics - This feature will be implemented soon!");
  };

  // Update the existing searchItems function to handle both dashboards
  window.searchItems = (dashboardType) => {
    const searchTerm = document.getElementById(`${dashboardType}SearchInput`).value.toLowerCase();
    alert(`Searching for: ${searchTerm} in ${dashboardType} dashboard - This feature will be implemented soon!`);
  };

  // Case-insensitive duplicate check function
  window.checkForDuplicateUser = async function(username, userType, studentId, staffId, email) {
    try {
      const usersRef = collection(window.db, "users");
      const allUsersSnapshot = await getDocs(usersRef);
      
      // Check for duplicate email (case-insensitive)
      if (email) {
        const emailExists = allUsersSnapshot.docs.some(doc => {
          const userData = doc.data();
          return userData.email && userData.email.toLowerCase() === email.toLowerCase();
        });
        
        if (emailExists) {
          return {
            exists: true,
            message: "This email address is already registered. Please sign in or use a different email address."
          };
        }
      }
      
      // Check for duplicate username (case-insensitive)
      if (username) {
        const usernameExists = allUsersSnapshot.docs.some(doc => {
          const userData = doc.data();
          return userData.username && userData.username.toLowerCase() === username.toLowerCase();
        });
        
        if (usernameExists) {
          return {
            exists: true,
            message: "This username is already taken. Please choose a different username."
          };
        }
      }
      
      // Check for duplicate student ID (exact match since IDs are numbers)
      if (userType === "student" && studentId) {
        const studentIdExists = allUsersSnapshot.docs.some(doc => {
          const userData = doc.data();
          return userData.studentId && userData.studentId === studentId;
        });
        
        if (studentIdExists) {
          return {
            exists: true,
            message: "This student ID is already registered. If this is your ID, please sign in with your existing account."
          };
        }
      }
      
      // Check for duplicate staff ID (exact match)
      if (userType === "staff" && staffId) {
        const staffIdExists = allUsersSnapshot.docs.some(doc => {
          const userData = doc.data();
          return userData.staffId && userData.staffId === staffId;
        });
        
        if (staffIdExists) {
          return {
            exists: true,
            message: "This staff ID is already registered. If this is your ID, please sign in with your existing account."
          };
        }
      }
      
      return { exists: false, message: "" };
      
    } catch (error) {
      console.error("Error checking for duplicate user:", error);
      return { 
        exists: false, 
        message: "Note: Could not verify username availability due to connection issues." 
      };
    }
  };

  function handleSignOut() {
    signOut(auth).then(() => {
      console.log('User signed out');
    }).catch((error) => {
      console.error('Sign out error:', error);
    });
  }
  
  async function loadDashboardData() {
    try {
      // Load lost items
      const lostItemsQuery = query(collection(db, "items"), where("type", "==", "lost"));
      const lostItemsSnapshot = await getDocs(lostItemsQuery);
      const lostItems = lostItemsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      // Load found items
      const foundItemsQuery = query(collection(db, "items"), where("type", "==", "found"));
      const foundItemsSnapshot = await getDocs(foundItemsQuery);
      const foundItems = foundItemsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      // Update UI
      updateItemsList('lostItemsList', lostItems);
      updateItemsList('foundItemsList', foundItems);
    } catch (error) {
      console.error("Error loading dashboard data:", error);
    }
  }

  function updateItemsList(listId, items) {
    const listElement = document.getElementById(listId);
    if (items.length === 0) {
      listElement.innerHTML = '<div class="no-items">No items found</div>';
      return;
    }
    listElement.innerHTML = items.map(item => `
      <div class="item-card">
        <div class="item-header">
          <h4>${item.name}</h4>
          <span class="item-status ${item.status}">${item.status}</span>
        </div>
        <p class="item-description">${item.description}</p>
        <div class="item-details">
          <span class="item-location">üìç ${item.location}</span>
          <span class="item-date">üìÖ ${new Date(item.date).toLocaleDateString()}</span>
        </div>
        <div class="item-actions">
          <button class="action-btn claim-btn" onclick="claimItem('${item.id}')">Claim</button>
          <button class="action-btn details-btn" onclick="viewItemDetails('${item.id}')">Details</button>
        </div>
      </div>
    `).join('');
  }

  function showVerificationReminder(user) {
    // Create verification reminder modal
    const verificationModal = document.createElement('div');
    verificationModal.id = 'verificationModal';
    verificationModal.className = 'modal';
    verificationModal.innerHTML = `
      <div class="modal-content verification-content">
        <h2>üìß Verify Your Email</h2>
        <p>We've sent a verification link to <strong>${user.email}</strong></p>
        <p>Please check your inbox and click the verification link to activate your account.</p>
        <div class="verification-steps">
          <div class="step">1. Check your email inbox</div>
          <div class="step">2. Find our verification email</div>
          <div class="step">3. Click the verification link</div>
          <div class="step">4. Return here and refresh the page</div>
        </div>
        <div class="verification-actions">
          <button id="resendVerification" class="auth-submit-btn">Resend Verification Email</button>
          <button id="closeVerification" class="auth-submit-btn secondary">Close</button>
        </div>
        <p class="verification-note">You need to verify your email to access the dashboard.</p>
      </div>
    `;
    document.body.appendChild(verificationModal);
    verificationModal.style.display = 'block';

    // Add event listeners
    document.getElementById('resendVerification').addEventListener('click', function() {
      sendEmailVerification(user).then(() => {
        alert('Verification email sent! Please check your inbox.');
      }).catch((error) => {
        alert('Error sending verification email: ' + error.message);
      });
    });

    document.getElementById('closeVerification').addEventListener('click', function() {
      verificationModal.remove();
    });

    // Close when clicking outside
    verificationModal.addEventListener('click', function(event) {
      if (event.target === verificationModal) {
        verificationModal.remove();
      }
    });

    // Auto-check for email verification every 5 seconds
    const checkVerificationInterval = setInterval(async () => {
      try {
        await user.reload();
        
        if (user.emailVerified) {
          clearInterval(checkVerificationInterval);
          verificationModal.remove();
          window.location.reload();
        }
      } catch (error) {
        console.error('Error checking verification status:', error);
      }
    }, 1000);

    // Clean up interval when modal is closed
    verificationModal.addEventListener('close', () => {
      clearInterval(checkVerificationInterval);
    });
  }

  // Make functions globally available
  window.showSignInModal = showSignInModal;
  window.showSignUpModal = showSignUpModal;
  window.showVerificationReminder = showVerificationReminder;
  window.loadDashboardData = loadDashboardData;
  window.claimItem = (itemId) => {
    alert(`Claiming item ${itemId} - This feature will be implemented soon!`);
  };
  window.viewItemDetails = (itemId) => {
    alert(`Viewing details for item ${itemId} - This feature will be implemented soon!`);
  };
  window.searchItems = () => {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    alert(`Searching for: ${searchTerm} - This feature will be implemented soon!`);
  };
  window.reportItem = (type) => {
    alert(`Reporting ${type} item - This feature will be implemented soon!`);
  };
</script>
</head>

<body>
  <header class="header">
    <div class="logo-container">
      <div class="logo">
        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="logo-text">ACLC Lost & Found</div>
    </div>

    <div class="auth-buttons">
      <button class="sign-in-btn">Sign In</button>
      <button class="sign-up-btn">Sign Up</button>
    </div>
  </header>

  <!-- Homepage (Visible when not logged in) -->
  <main id="homepage" class="content">
    <div class="content-box">
      <h2>Lost Something? We'll Help You Find It</h2>
      <p class="box-description">ACLC College's digital lost and found system helps reunite students and staff with their missing belongings quickly and securely.</p>

      <div class="box-content">
        <div class="feature">
          <div class="feature-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>Search Lost Items</h3>
          <p>Browse through our database of found items to see if your lost item has been turned in.</p>
        </div>
        <div class="feature">
          <div class="feature-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>Report Lost Item</h3>
          <p>Fill out a form to report your lost item with details and contact information.</p>
        </div>
        <div class="feature">
          <div class="feature-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>Claim Found Item</h3>
          <p>If you found an item, report it here to help reunite it with its owner.</p>
        </div>
      </div>
    </div>

    <!-- Additional Feature Boxes -->
    <div class="additional-features">
      <div class="feature-box">
        <div class="feature-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 15V17M6 21H18C19.1046 21 20 20.1046 20 19V13C20 11.8954 19.1046 11 18 11H6C4.89543 11 4 11.8954 4 13V19C4 20.1046 4.89543 21 6 21ZM16 11V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V11H16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3>Secure Claims</h3>
        <p>Our verification process ensures items are returned to their rightful owners through secure identity confirmation and item matching.</p>
      </div>
      <div class="feature-box">
        <div class="feature-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 17H20L18.5951 15.5951C18.2141 15.2141 18 14.6973 18 14.1585V11C18 8.38757 16.3304 6.16509 14 5.34142V5C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5V5.34142C7.66962 6.16509 6 8.38757 6 11V14.1585C6 14.6973 5.78595 15.2141 5.40493 15.5951L4 17H9M15 17V18C15 19.6569 13.6569 21 12 21C10.3431 21 9 19.6569 9 18V17M15 17H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3>Smart Notifications</h3>
        <p>Get instant alerts when items matching your description are found, and receive status updates throughout the recovery process.</p>
      </div>
    </div>

    <!-- Statistics Box -->
    <div class="stats-box">
      <h2>Our Impact</h2>
      <div class="stats-container">
        <div class="stat-item">
          <div class="stat-number">1,247</div>
          <div class="stat-label">Items Found</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">983</div>
          <div class="stat-label">Successful Returns</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">78.8%</div>
          <div class="stat-label">Success Rate</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">24h</div>
          <div class="stat-label">Avg Response Time</div>
        </div>
      </div>
    </div>
  </main>

  <!-- Student Dashboard (Hidden by default) -->
  <div id="studentDashboard" class="dashboard" style="display: none;">
    <div class="dashboard-header">
      <h1 id="studentDashboardWelcome">Welcome!</h1>
      <p>Manage your lost and found items</p>
    </div>

    <div class="dashboard-stats">
      <div class="stat-card">
        <div class="stat-value" id="studentLostCount">0</div>
        <div class="stat-label">Items Lost</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="studentClaimedCount">0</div>
        <div class="stat-label">Items Claimed</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="studentPendingCount">0</div>
        <div class="stat-label">Pending Claims</div>
      </div>
    </div>

    <div class="dashboard-actions">
      <div class="search-bar">
        <input type="text" id="studentSearchInput" placeholder="Search items...">
        <button class="search-btn" onclick="searchItems('student')">Search</button>
      </div>
      <div class="action-buttons">
        <button class="report-btn lost-btn" onclick="reportItem('lost')">Report Lost</button>
        <button class="report-btn found-btn" onclick="reportItem('found')">Report Found</button>
      </div>
    </div>

    <div class="dashboard-content">
      <div class="items-section">
        <div class="items-column">
          <h3>Lost Items</h3>
          <div class="items-list" id="studentLostItemsList">
            <div class="no-items">No lost items to display</div>
          </div>
        </div>
        <div class="items-column">
          <h3>Found Items</h3>
          <div class="items-list" id="studentFoundItemsList">
            <div class="no-items">No found items to display</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Staff Dashboard (Hidden by default) -->
  <div id="staffDashboard" class="dashboard" style="display: none;">
    <div class="dashboard-header">
      <h1 id="staffDashboardWelcome">Staff Dashboard</h1>
      <p>Review and manage all lost and found items</p>
    </div>

    <div class="dashboard-stats">
      <div class="stat-card">
        <div class="stat-value" id="totalItemsCount">0</div>
        <div class="stat-label">Total Items</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="pendingClaimsCount">0</div>
        <div class="stat-label">Pending Claims</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="resolvedClaimsCount">0</div>
        <div class="stat-label">Resolved (Week)</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">Active</div>
        <div class="stat-label">Status</div>
      </div>
    </div>

    <div class="dashboard-content">
      <div class="pending-claims-section">
        <h3>Pending Claims - Requires Action</h3>
        <div id="pendingClaimsList" class="items-list">
          <div class="no-items">No pending claims</div>
        </div>
      </div>

      <div class="items-section" style="margin-top: 40px;">
        <div class="items-column">
          <h3>All Lost Items</h3>
          <div class="items-list" id="staffLostItemsList">
            <div class="no-items">No items to display</div>
          </div>
        </div>
        <div class="items-column">
          <h3>All Found Items</h3>
          <div class="items-list" id="staffFoundItemsList">
            <div class="no-items">No items to display</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>About</h3>
        <ul>
          <li><a href="#">About ACLC</a></li>
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="#">Report Lost Item</a></li>
          <li><a href="#">Browse Found Items</a></li>
          <li><a href="#">My Claims</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Help</h3>
        <ul>
          <li><a href="#">FAQ</a></li>
          <li><a href="#">How to Report</a></li>
          <li><a href="#">Support</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 ACLC Lost and Found. All rights reserved.</p>
    </div>
  </footer>

  <!-- Auth Modal -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>

      <!-- Sign In Form -->
      <form id="signInForm" class="auth-form" style="display: none;">
        <h2>Welcome Back</h2>
        <div class="form-group">
          <label for="signInEmail">Email</label>
          <input type="email" id="signInEmail" placeholder="your.email@aclc.edu" required>
        </div>
        <div class="form-group">
          <label for="signInPassword">Password</label>
          <input type="password" id="signInPassword" placeholder="Enter your password" required>
        </div>
        <button type="submit" id="signInFormElement" class="auth-submit-btn">Sign In</button>
        <div class="auth-switch">
          <p>Don't have an account? <a href="#" id="switchToSignUp">Sign up</a></p>
          <p><a href="#" id="forgotPasswordLink">Forgot your password?</a></p>
        </div>
        <div id="authMessage" class="auth-message"></div>
      </form>

      <!-- Sign Up Form -->
      <form id="signUpForm" class="auth-form" style="display: none;">
        <h2>Create Account</h2>
        <div class="form-group">
          <label for="signUpUsername">Username</label>
          <input type="text" id="signUpUsername" placeholder="Choose a username" required>
        </div>
        <div class="form-group">
          <label for="signUpEmail">Email</label>
          <input type="email" id="signUpEmail" placeholder="your.email@aclc.edu" required>
        </div>
        <div class="form-group">
          <label>I am a...</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="userType" value="student" required>
              <span class="radio-custom"></span>
              Student
            </label>
            <label class="radio-label">
              <input type="radio" name="userType" value="staff">
              <span class="radio-custom"></span>
              Staff
            </label>
          </div>
        </div>
        <div id="studentIdGroup" class="form-group id-input-group" style="display: none;">
          <label for="studentId">Student ID</label>
          <input type="text" id="studentId" placeholder="Enter 11-digit student ID">
        </div>
        <div id="staffIdGroup" class="form-group id-input-group" style="display: none;">
          <label for="staffId">Staff ID</label>
          <input type="text" id="staffId" placeholder="Enter your staff ID">
        </div>
        <div class="form-group">
          <label for="signUpPassword">Password</label>
          <input type="password" id="signUpPassword" placeholder="Create a password" required>
          <div class="password-strength">
            <div class="strength-bar"></div>
            <div class="strength-text">Strength: <span id="strengthMessage">Weak</span></div>
          </div>
        </div>
        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <input type="password" id="confirmPassword" placeholder="Re-enter your password" required>
          <div class="password-match" id="matchMessage"></div>
        </div>
        <button type="submit" id="signUpFormElement" class="auth-submit-btn">Create Account</button>
        <div class="auth-switch">
          <p>Already have an account? <a href="#" id="switchToSignIn">Sign in</a></p>
        </div>
        <div id="authMessage" class="auth-message"></div>
      </form>
    </div>
  </div>

  <!-- Forgot Password Modal -->
  <div id="forgotPasswordModal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <form id="forgotPasswordForm" class="auth-form">
        <h2>Reset Password</h2>
        <p style="text-align: center; margin-bottom: 20px; color: #666;">Enter your email address and we'll send you a link to reset your password.</p>
        <div class="form-group">
          <label for="resetEmail">Email Address</label>
          <input type="email" id="resetEmail" placeholder="your.email@aclc.edu" required>
        </div>
        <button type="submit" class="auth-submit-btn">Send Reset Link</button>
        <div class="auth-switch">
          <p><a href="#" id="backToSignIn">Back to Sign In</a></p>
        </div>
        <div id="forgotPasswordMessage" class="auth-message"></div>
      </form>
    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>
